(()=>{"use strict";const e=(()=>{const e=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))};return{saveToLocalStorage:e,callFromLocalStorage:()=>{const e=localStorage.getItem("data");return JSON.parse(e)},getAllCountriesData:async()=>{const t=await fetch("https://restcountries.com/v3/all",{mode:"cors"}),n=await t.json();return e("data",n)}}})();let t=e.callFromLocalStorage();const n={borders:e=>t[e].borders,capital:e=>void 0===t[e].capital?"Not Applicable":t[e].capital,filterByContinent:e=>{const n=t.filter((t=>t.region===e));return t=n,n},getCountryIndex:e=>t.findIndex((t=>t.name.official===e)),currency:e=>void 0===t[e].currencies?"Not Applicable":Object.keys(t[e].currencies),flag:e=>t[e].flags[0],filterBySearch:e=>{const n=t.filter((t=>t.name.official.toLowerCase().includes(e.toLowerCase())));return t=n,n},languages:e=>{const n=Object.keys(t[e].languages),a=[];for(let o=0;o<n.length;o++)a.push(t[e].languages[n[o]]);return a},name:e=>t[e].name.official,commonName:e=>t[e].name.common,overview:e=>t[e],population:e=>Number(t[e].population).toLocaleString(),continent:e=>t[e].region,setCountryDataToGlobal:()=>{t=e.callFromLocalStorage()},subRegion:e=>void 0===t[e].subregion?"Not Applicable":t[e].subregion,topLevelDomain:e=>t[e].tld},a=(()=>{const e=(e,t)=>{const n=document.createElement("p");return n.classList.add("attribute"),n.innerHTML=`<strong>${e}: </strong>${t}`,n};return{createAttrElement:e,createAttrRow:(t,n)=>{const a=document.createElement("div");a.classList.add("overview-attributes");for(let o=0;o<t;o++){const t=Object.keys(n)[o],c=n[t],r=e(t,c);a.append(r)}return a},createCardDiv:()=>{const e=document.createElement("div");return e.classList.add("country-card"),e.setAttribute("role","button"),e},createCommonElements:(e,t)=>{const n=document.querySelector(".country-cards-container"),o=document.createElement("div");return o.classList.add("details"),[n,o,a.createNameElement(e.name(t)),a.createCardDiv(),a.createFlagDiv(e.flag(t),e.name(t))]},createFlagDiv:(e,t)=>{const n=document.createElement("div");return n.classList.add("flag"),n.innerHTML=`<img class = "flag-image" src = ${e} alt=${t}>`,n},createLangElement:(t,n)=>{const a=[];for(let e=0;e<n.length;e++)a.push(` ${n[e]}`);return e(t,a)},createNameElement:e=>{const t=document.createElement("h1");return t.classList.add("country-name"),t.textContent=e,t}}})(),o=e.callFromLocalStorage(),c={createBorderRow:e=>{const t=document.createElement("div");t.classList.add("borders-row");const a=document.createElement("p");a.classList.add("borders-title"),a.textContent="Border Countries:";const c=(e=>{let t=(e=>{let t=[];if(void 0===e)t="None";else for(let n=0;n<e.length;n++){const a=o.findIndex((t=>t.cca3===e[n]));t.push(o[a].name.official)}return t})(e);const n=document.createElement("div");n.classList.add("borders-button-Row");const a=document.createElement("P");if(a.textContent="None","None"===t)n.append(a);else for(let e=0;e<t.length;e++){const a=document.createElement("button");a.classList.add("borders-btn"),a.textContent=`${t[e]}`,a.setAttribute("data-btn",`${t[e]}`),n.appendChild(a)}return n})(n.borders(e));return t.appendChild(a),t.appendChild(c),t},borderBtnClick:()=>{document.querySelectorAll(".borders-btn").forEach((e=>e.addEventListener("click",(function(){const t=e.textContent,a=n.getCountryIndex(t);s.clearScreen(),r(a)}))))}};function r(e=0){const[t,o,r,l,d]=a.createCommonElements(n,e);l.classList.add("greybkGround");const i={"Common Name":n.commonName(e),Population:n.population(e),Continent:n.continent(e),"Sub Region":n.subRegion(e),Capital:n.capital(e)},u=a.createAttrRow(5,i),m={"Top Level Domain":n.topLevelDomain(e),Currency:n.currency(e)},p=document.createElement("div");p.classList.add("second-row");const g=a.createAttrRow(2,m),h=a.createLangElement("Languages",n.languages(e)),y=c.createBorderRow(e);s.mediaQuery.matches&&(y.classList.add("borders-row-lg-detailed"),r.classList.add("country-name-lg-detailed"),l.classList.add("country-card-lg-detailed"),l.classList.remove("country-card"),d.classList.add("flag-lg-detailed"),o.classList.add("details-lg-detailed"),u.classList.add("col1-lg-detailed"),p.classList.add("second-row-lg-detailed")),l.appendChild(d),o.append(r),o.appendChild(u),p.append(g),p.append(h),o.appendChild(p),o.appendChild(y),l.appendChild(o),t.appendChild(l),c.borderBtnClick()}const l=e.callFromLocalStorage();function d(e=l){for(let t=0;t<e.length;t++){const[e,o,c,r,l]=a.createCommonElements(n,t),d={Population:n.population(t),Continent:n.continent(t),Capital:n.capital(t)},s=3,i=a.createAttrRow(s,d);r.appendChild(l),o.appendChild(c),o.appendChild(i),r.append(o),e.appendChild(r)}s.detailedViewClick()}const s=(()=>{const e=()=>{document.querySelector(".country-cards-container").innerHTML=""},t=()=>{document.querySelectorAll(".continents").forEach((t=>t.addEventListener("click",(function(){const t=this.dataset.continent,a=n.filterByContinent(t);e(),d(a),n.setCountryDataToGlobal()}))))},a=window.matchMedia("(min-width: 900px)");return{byContinentMenuHandler:()=>{document.querySelector(".dropbtn").addEventListener("click",(function(){document.getElementById("myDropdown").classList.toggle("show")})),window.onclick=function(e){if(!e.target.matches(".dropbtn")){const e=document.getElementsByClassName("dropdown-content");let t;for(t=0;t<e.length;t++){let n=e[t];n.classList.contains("show")&&n.classList.remove("show")}}},t()},clearScreen:e,detailedViewClick:()=>{document.querySelectorAll(".country-card").forEach((t=>t.addEventListener("click",(function(){const a=t.querySelector(".country-name").innerText,o=n.getCountryIndex(a);e(),r(o),document.querySelectorAll(".hide-in-detail").forEach((e=>e.style.display="none")),document.querySelector(".js-back-btn").style.display="block"}))))},backBtn:()=>{document.querySelector(".js-back-btn").addEventListener("click",(function(){e(),d(),document.querySelectorAll(".hide-in-detail").forEach((e=>e.style.display="block")),document.querySelector(".js-back-btn").style.display="none"}))},displaySearchResult:()=>{const t=document.querySelector("#search-bar");t.addEventListener("keydown",(function(a){const o=t.value,c=n.filterBySearch(o);e(),d(c),n.setCountryDataToGlobal()}))},themeBtnClick:()=>{const e=document.querySelector(".theme-btn");e.addEventListener("click",(function(){const t=document.querySelector("#active-theme");document.head.removeChild(t);const n=document.createElement("link");n.rel="stylesheet",n.type="text/css","light"===t.getAttribute("data-theme")?(n.setAttribute("data-theme","dark"),n.href="./../src/darktheme.css",e.textContent="Light Mode"):(n.setAttribute("data-theme","light"),n.href="./../src/lighttheme.css",e.textContent="Dark Mode"),n.id="active-theme",document.head.appendChild(n)}))},mediaQuery:a}})();null===localStorage.getItem("data")&&e.getAllCountriesData(),d(e.callFromLocalStorage()),s.byContinentMenuHandler(),s.backBtn(),s.displaySearchResult(),s.themeBtnClick()})();